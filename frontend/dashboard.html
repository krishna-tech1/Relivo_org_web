<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Dashboard | Relivo Organization Portal</title>
    <link rel="stylesheet" href="css/styles.css" />
    <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body>
    <main class="page">
        <nav class="dashboard-nav">
            <div class="user-profile">
                <div class="user-avatar" id="avatarInitial">R</div>
                <div>
                    <h2 id="orgName" style="font-size: 1.25rem;">Loading...</h2>
                    <p class="muted" id="orgInfo" style="font-size: 0.875rem;">Connecting to gateway...</p>
                </div>
            </div>
            <div style="display: flex; gap: 16px;">
                <a class="btn primary" href="grant_form.html" id="createGrantBtn">
                    <i data-lucide="plus-circle"></i>
                    Publish Grant
                </a>
                <button class="btn danger" id="logoutBtn">
                    <i data-lucide="log-out"></i>
                    Exit
                </button>
            </div>
        </nav>

        <section class="stats-grid">
            <div class="stat-card">
                <p class="stat-label">Total Published</p>
                <div class="stat-value" id="totalGrants">0</div>
            </div>
            <div class="stat-card" style="border-bottom-color: var(--success);">
                <p class="stat-label">Active Listings</p>
                <div class="stat-value" id="activeGrants">0</div>
            </div>
            <div class="stat-card" style="border-bottom-color: var(--warning);">
                <p class="stat-label">Pending Review</p>
                <div class="stat-value" id="inactiveGrants">0</div>
            </div>
        </section>

        <section>
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 32px;">
                <h2 style="font-size: 1.75rem;">Your Grant Portfolio</h2>
                <div class="muted">Manage and monitor all your grant publications.</div>
            </div>

            <div id="grantsList" class="grid">
                <!-- Data injected by dashboard.js -->
                <p class="muted">Synchronizing data with secure server...</p>
            </div>
        </section>
    </main>

    <script src="js/config.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/dashboard.js"></script>
    <script>
        lucide.createIcons();

        // Dynamic initial for avatar
        window.onload = () => {
            const name = document.getElementById('orgName').textContent;
            if (name && name !== 'Loading...') {
                document.getElementById('avatarInitial').textContent = name.charAt(0).toUpperCase();
            }
        };
    </script>
</body>

</html>